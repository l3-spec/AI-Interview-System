# VADåŠŸèƒ½å¿«é€Ÿå‚è€ƒå¡ ğŸ¯

## âš¡ 5ç§’äº†è§£

**æ‚¨çš„éœ€æ±‚**ï¼šç”¨æˆ·ç‚¹å‡»å¼€å§‹ â†’ VADè‡ªåŠ¨æ‹¾éŸ³ â†’ æ£€æµ‹é™éŸ³ â†’ è‡ªåŠ¨è¯†åˆ« â†’ æäº¤backendå¤„ç†

**å®ç°çŠ¶æ€**ï¼šâœ… **å·²å®Œæˆå¹¶å®‰è£…**

## ğŸ® ç«‹å³æµ‹è¯•

```bash
# ä¸€é”®ç›‘æ§æ—¥å¿—
adb logcat -c && adb logcat | grep -E "RealtimeVoiceManager|VoiceActivityDetector"
```

**åœ¨Appä¸­æ“ä½œ**ï¼š
1. è¿›å…¥æ•°å­—äººé¢è¯•
2. ç‚¹å‡»"å¼€å§‹ç­”é¢˜ï¼ˆVADï¼‰"
3. è¯´è¯åç­‰å¾…2ç§’
4. è‡ªåŠ¨è¯†åˆ«

## ğŸ”‘ å…³é”®å‚æ•°

```kotlin
é™éŸ³é˜ˆå€¼: -40dB         // ä½äºæ­¤å€¼è®¤ä¸ºæ˜¯é™éŸ³
é™éŸ³æ—¶é•¿: 2000ms        // 2ç§’é™éŸ³åè‡ªåŠ¨åœæ­¢
æœ€çŸ­è¯´è¯: 500ms         // è‡³å°‘è¯´0.5ç§’æ‰æœ‰æ•ˆ
æœ€é•¿å½•éŸ³: 60000ms       // æœ€å¤šå½•60ç§’
```

## ğŸ“Š æ–‡æœ¬æäº¤ç­–ç•¥

**å·²å®ç°ç­–ç•¥ï¼šå®Œæ•´è¯†åˆ«åæäº¤**

```
å½•éŸ³å®Œæˆ â†’ å®Œæ•´ASRè¯†åˆ« â†’ ä¸€æ¬¡æ€§æäº¤backend â†’ LLMå¤„ç† â†’ TTSæ’­æ”¾
```

**ä¼˜ç‚¹**ï¼šæœ€å‡†ç¡®ã€æœ€å¯é ã€æœ€é€‚åˆé¢è¯•

## ğŸ¨ UIç‰¹æ€§

| UIå…ƒç´  | çŠ¶æ€ |
|--------|------|
| VADå¼€å…³ | åº•éƒ¨é¢æ¿ä¸­ |
| å¼€å…³è¯´æ˜ | "è‡ªåŠ¨æ£€æµ‹è¯´è¯å’Œé™éŸ³" |
| æŒ‰é’®æ–‡æœ¬ | "å¼€å§‹ç­”é¢˜ï¼ˆVADï¼‰" / "åœæ­¢è†å¬" |
| å®æ—¶çŠ¶æ€ | "æ­£åœ¨å½•éŸ³... 5ç§’ (-32dB)" |

## ğŸ” è°ƒè¯•æ—¥å¿—

### æˆåŠŸçš„VADæµç¨‹

```
âœ… å¼€å§‹VADæ™ºèƒ½å½•éŸ³å¾ªç¯
âœ… æ£€æµ‹åˆ°è¯´è¯å¼€å§‹: -35dB
âœ… ç¡®è®¤è¿›å…¥è¯´è¯çŠ¶æ€
âœ… å·²å½•éŸ³: 32KB, æ—¶é•¿: 2ç§’
âœ… æ£€æµ‹åˆ°é™éŸ³å¼€å§‹
âœ… è¯´è¯ç»“æŸï¼Œæ€»æ—¶é•¿: 5234ms
âœ… ASRæˆåŠŸ: text=...
âœ… é€šè¿‡WebSocketå‘é€text_message
âœ… æ”¶åˆ°è¯­éŸ³å“åº”
âœ… TTSæˆåŠŸï¼Œå¼€å§‹æ’­æ”¾
```

## âš™ï¸ å‚æ•°è°ƒä¼˜

### å¦‚æœVADå¤ªçµæ•

```kotlin
// ä¿®æ”¹ RealtimeVoiceManager.kt
silenceThresholdDb = -35f  // ä»-40æ”¹ä¸º-35
speechMinDurationMs = 800  // ä»500æ”¹ä¸º800
```

### å¦‚æœVADä¸å¤Ÿçµæ•

```kotlin
silenceThresholdDb = -45f  // ä»-40æ”¹ä¸º-45
```

### å¦‚æœç»å¸¸è¯¯ç»“æŸ

```kotlin
silenceDurationMs = 3000   // ä»2000æ”¹ä¸º3000ï¼ˆ3ç§’ï¼‰
```

## ğŸ“ æ–‡ä»¶ä½ç½®

```
android-v0-compose/app/src/main/java/com/example/v0clone/ai/realtime/
â”œâ”€â”€ VoiceActivityDetector.kt       # VADæ£€æµ‹å™¨ï¼ˆæ–°ï¼‰
â”œâ”€â”€ RealtimeVoiceManager.kt        # è¯­éŸ³ç®¡ç†å™¨ï¼ˆå·²ä¿®æ”¹ï¼‰
â””â”€â”€ AliyunSpeechService.kt         # é˜¿é‡Œäº‘æœåŠ¡

android-v0-compose/app/src/main/java/com/example/v0clone/ai/
â””â”€â”€ DigitalInterviewScreen.kt      # UIç•Œé¢ï¼ˆå·²ä¿®æ”¹ï¼‰
```

## ğŸ†˜ å¸¸è§é—®é¢˜

**Q: VADæ²¡æœ‰è‡ªåŠ¨åœæ­¢ï¼Ÿ**
A: ç¯å¢ƒå™ªéŸ³å¤§æˆ–éŸ³é‡å°ï¼Œè°ƒæ•´ `silenceThresholdDb`

**Q: è¯´è¯åœé¡¿å°±è¢«ç»“æŸäº†ï¼Ÿ**
A: å¢åŠ  `silenceDurationMs` åˆ° 3000ms

**Q: æƒ³æ‰‹åŠ¨æ§åˆ¶æ€ä¹ˆåŠï¼Ÿ**
A: å…³é—­"æ™ºèƒ½VADæ¨¡å¼"å¼€å…³

**Q: æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Ÿ**
A: æ£€æŸ¥backendæœåŠ¡ã€WebSocketè¿æ¥ã€é˜¿é‡Œäº‘é…ç½®

## ğŸ“ è·å–æ”¯æŒ

æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š
```bash
# 1. Androidæ—¥å¿—
adb logcat -d > android.log

# 2. æµ‹è¯•Token API
curl http://192.168.1.6:3001/api/voice/aliyun-token > token.json

# 3. ç½‘ç»œæµ‹è¯•
adb shell ping -c 4 192.168.1.6
```

---

**å¿«é€Ÿå‚è€ƒ v1.0** | 2025-11-12 | âœ… å¯ç›´æ¥ä½¿ç”¨

