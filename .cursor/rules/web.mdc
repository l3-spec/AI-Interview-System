---
description: Web å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ - React/TypeScript/Vite å¼€å‘è§„èŒƒ
globs:
  - "admin-dashboard/**/*.{ts,tsx}"
  - "system-admin/**/*.{ts,tsx}"
  - "v0/**/*.{ts,tsx}"
alwaysApply: false
---
# Web å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ

## ğŸ¯ è§’è‰²å®šä½
ä½ æ˜¯ä¸€ä½èµ„æ·± Web å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ,ç²¾é€šï¼š
- React 18+ åŠ Hooks
- TypeScript ç±»å‹ç³»ç»Ÿ
- Vite æ„å»ºå·¥å…·
- çŠ¶æ€ç®¡ç†ï¼ˆZustand/Contextï¼‰
- CSS-in-JS / Tailwind CSS
- å“åº”å¼è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ ‡å‡†ç›®å½•ç»“æ„
```
src/
â”œâ”€â”€ assets/           # é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ fonts/
â”œâ”€â”€ components/       # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/          # UI åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ layout/      # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ common/      # å…¬å…±ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”œâ”€â”€ Users/
â”‚   â””â”€â”€ Settings/
â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ services/        # API æœåŠ¡
â”œâ”€â”€ stores/          # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/           # TypeScript ç±»å‹
â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ routes/          # è·¯ç”±é…ç½®
â”œâ”€â”€ styles/          # å…¨å±€æ ·å¼
â”œâ”€â”€ App.tsx          # æ ¹ç»„ä»¶
â””â”€â”€ main.tsx         # å…¥å£æ–‡ä»¶
```

## ğŸ’» ä»£ç è§„èŒƒ

### TypeScript ç±»å‹å®šä¹‰
```typescript
// types/user.ts

// âœ… æ¨èï¼šå®šä¹‰æ¸…æ™°çš„æ¥å£
export interface User {
  id: string;
  email: string;
  name: string;
  avatar?: string;
  role: UserRole;
  createdAt: string;
  updatedAt: string;
}

export enum UserRole {
  Admin = 'ADMIN',
  User = 'USER',
  Interviewer = 'INTERVIEWER'
}

// âœ… æ¨èï¼šä½¿ç”¨ Utility Types
export type CreateUserInput = Omit<User, 'id' | 'createdAt' | 'updatedAt'>;
export type UpdateUserInput = Partial<CreateUserInput>;
export type UserListItem = Pick<User, 'id' | 'name' | 'email' | 'role'>;

// âœ… æ¨èï¼šå®šä¹‰ API å“åº”ç±»å‹
export interface ApiResponse<T> {
  success: boolean;
  data: T;
  message?: string;
}

export interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  pageSize: number;
}
```

### React ç»„ä»¶å¼€å‘

#### å‡½æ•°ç»„ä»¶æœ€ä½³å®è·µ
```typescript
import { FC, memo, useState, useEffect, useCallback } from 'react';

// âœ… æ¨èï¼šå®šä¹‰ç»„ä»¶ Props æ¥å£
interface UserCardProps {
  user: User;
  onEdit?: (userId: string) => void;
  onDelete?: (userId: string) => void;
  className?: string;
}

// âœ… æ¨èï¼šä½¿ç”¨ FC ç±»å‹å’Œ memo ä¼˜åŒ–
export const UserCard: FC<UserCardProps> = memo(({
  user,
  onEdit,
  onDelete,
  className = ''
}) => {
  // âœ… æ¨èï¼šä½¿ç”¨ useState ç®¡ç†æœ¬åœ°çŠ¶æ€
  const [isHovered, setIsHovered] = useState(false);

  // âœ… æ¨èï¼šä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°
  const handleEdit = useCallback(() => {
    onEdit?.(user.id);
  }, [user.id, onEdit]);

  const handleDelete = useCallback(() => {
    if (confirm(`ç¡®å®šè¦åˆ é™¤ç”¨æˆ· ${user.name} å—ï¼Ÿ`)) {
      onDelete?.(user.id);
    }
  }, [user.id, user.name, onDelete]);

  return (
    <div
      className={`user-card ${className}`}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
    >
      <div className="user-avatar">
        <img src={user.avatar || '/default-avatar.png'} alt={user.name} />
      </div>
      
      <div className="user-info">
        <h3>{user.name}</h3>
        <p>{user.email}</p>
        <span className="user-role">{user.role}</span>
      </div>

      {isHovered && (
        <div className="user-actions">
          <button onClick={handleEdit}>ç¼–è¾‘</button>
          <button onClick={handleDelete}>åˆ é™¤</button>
        </div>
      )}
    </div>
  );
});

UserCard.displayName = 'UserCard';
```

#### è‡ªå®šä¹‰ Hooks
```typescript
// hooks/useUser.ts
import { useState, useEffect, useCallback } from 'react';
import { userApi } from '@/services/userApi';
import type { User } from '@/types/user';

interface UseUserResult {
  user: User | null;
  loading: boolean;
  error: Error | null;
  refetch: () => Promise<void>;
}

/**
 * è·å–ç”¨æˆ·ä¿¡æ¯çš„ Hook
 */
export function useUser(userId: string): UseUserResult {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);

  const fetchUser = useCallback(async () => {
    try {
      setLoading(true);
      setError(null);
      const data = await userApi.getUser(userId);
      setUser(data);
    } catch (err) {
      setError(err as Error);
    } finally {
      setLoading(false);
    }
  }, [userId]);

  useEffect(() => {
    fetchUser();
  }, [fetchUser]);

  return { user, loading, error, refetch: fetchUser };
}

// hooks/useDebounce.ts
import { useState, useEffect } from 'react';

/**
 * é˜²æŠ– Hook
 */
export function useDebounce<T>(value: T, delay: number = 500): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(timer);
    };
  }, [value, delay]);

  return debouncedValue;
}

// hooks/useLocalStorage.ts
import { useState, useEffect } from 'react';

/**
 * LocalStorage Hook
 */
export function useLocalStorage<T>(
  key: string,
  initialValue: T
): [T, (value: T) => void] {
  const [storedValue, setStoredValue] = useState<T>(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(error);
      return initialValue;
    }
  });

  const setValue = (value: T) => {
    try {
      setStoredValue(value);
      window.localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error(error);
    }
  };

  return [storedValue, setValue];
}
```

### API æœåŠ¡å°è£…
```typescript
// services/api.ts
import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';

// åˆ›å»º axios å®ä¾‹
const apiClient: AxiosInstance = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json'
  }
});

// è¯·æ±‚æ‹¦æˆªå™¨
apiClient.interceptors.request.use(
  (config) => {
    // æ·»åŠ  token
    const token = localStorage.getItem('access_token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// å“åº”æ‹¦æˆªå™¨
apiClient.interceptors.response.use(
  (response) => {
    return response.data;
  },
  (error) => {
    // ç»Ÿä¸€é”™è¯¯å¤„ç†
    if (error.response?.status === 401) {
      // token è¿‡æœŸï¼Œè·³è½¬ç™»å½•
      localStorage.removeItem('access_token');
      window.location.href = '/login';
    }
    
    return Promise.reject(error);
  }
);

export { apiClient };

// services/userApi.ts
import { apiClient } from './api';
import type { 
  User, 
  CreateUserInput, 
  UpdateUserInput,
  ApiResponse,
  PaginatedResponse 
} from '@/types';

export const userApi = {
  /**
   * è·å–ç”¨æˆ·åˆ—è¡¨
   */
  getUsers: async (
    page: number = 1,
    pageSize: number = 20
  ): Promise<PaginatedResponse<User>> => {
    return apiClient.get('/users', {
      params: { page, pageSize }
    });
  },

  /**
   * è·å–å•ä¸ªç”¨æˆ·
   */
  getUser: async (userId: string): Promise<User> => {
    return apiClient.get(`/users/${userId}`);
  },

  /**
   * åˆ›å»ºç”¨æˆ·
   */
  createUser: async (data: CreateUserInput): Promise<User> => {
    return apiClient.post('/users', data);
  },

  /**
   * æ›´æ–°ç”¨æˆ·
   */
  updateUser: async (
    userId: string,
    data: UpdateUserInput
  ): Promise<User> => {
    return apiClient.put(`/users/${userId}`, data);
  },

  /**
   * åˆ é™¤ç”¨æˆ·
   */
  deleteUser: async (userId: string): Promise<void> => {
    return apiClient.delete(`/users/${userId}`);
  }
};
```

### çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
```typescript
// stores/userStore.ts
import { create } from 'zustand';
import { devtools, persist } from 'zustand/middleware';
import type { User } from '@/types';

interface UserState {
  // çŠ¶æ€
  currentUser: User | null;
  isAuthenticated: boolean;
  
  // æ“ä½œ
  setCurrentUser: (user: User | null) => void;
  login: (email: string, password: string) => Promise<void>;
  logout: () => void;
}

export const useUserStore = create<UserState>()(
  devtools(
    persist(
      (set, get) => ({
        // åˆå§‹çŠ¶æ€
        currentUser: null,
        isAuthenticated: false,

        // è®¾ç½®å½“å‰ç”¨æˆ·
        setCurrentUser: (user) => {
          set({ 
            currentUser: user,
            isAuthenticated: !!user
          });
        },

        // ç™»å½•
        login: async (email, password) => {
          try {
            const response = await authApi.login({ email, password });
            const { user, token } = response;
            
            // ä¿å­˜ token
            localStorage.setItem('access_token', token);
            
            // æ›´æ–°çŠ¶æ€
            set({
              currentUser: user,
              isAuthenticated: true
            });
          } catch (error) {
            throw error;
          }
        },

        // ç™»å‡º
        logout: () => {
          localStorage.removeItem('access_token');
          set({
            currentUser: null,
            isAuthenticated: false
          });
        }
      }),
      {
        name: 'user-storage',
        partialize: (state) => ({ 
          currentUser: state.currentUser 
        })
      }
    )
  )
);
```

### è·¯ç”±é…ç½®
```typescript
// routes/index.tsx
import { createBrowserRouter, Navigate } from 'react-router-dom';
import { Layout } from '@/components/layout/Layout';
import { ProtectedRoute } from './ProtectedRoute';

// æ‡’åŠ è½½é¡µé¢ç»„ä»¶
const Dashboard = lazy(() => import('@/pages/Dashboard'));
const Users = lazy(() => import('@/pages/Users'));
const Login = lazy(() => import('@/pages/Login'));

export const router = createBrowserRouter([
  {
    path: '/',
    element: <Layout />,
    children: [
      {
        index: true,
        element: <Navigate to="/dashboard" replace />
      },
      {
        path: 'dashboard',
        element: (
          <ProtectedRoute>
            <Dashboard />
          </ProtectedRoute>
        )
      },
      {
        path: 'users',
        element: (
          <ProtectedRoute requiredRole="ADMIN">
            <Users />
          </ProtectedRoute>
        )
      }
    ]
  },
  {
    path: '/login',
    element: <Login />
  },
  {
    path: '*',
    element: <Navigate to="/dashboard" replace />
  }
]);

// routes/ProtectedRoute.tsx
import { FC, ReactNode } from 'react';
import { Navigate } from 'react-router-dom';
import { useUserStore } from '@/stores/userStore';

interface ProtectedRouteProps {
  children: ReactNode;
  requiredRole?: string;
}

export const ProtectedRoute: FC<ProtectedRouteProps> = ({
  children,
  requiredRole
}) => {
  const { isAuthenticated, currentUser } = useUserStore();

  if (!isAuthenticated) {
    return <Navigate to="/login" replace />;
  }

  if (requiredRole && currentUser?.role !== requiredRole) {
    return <Navigate to="/dashboard" replace />;
  }

  return <>{children}</>;
};
```

## ğŸ¨ æ ·å¼å¼€å‘

### Tailwind CSS
```typescript
// ä½¿ç”¨ Tailwind CSS ç±»å
const Button: FC<ButtonProps> = ({ variant = 'primary', children }) => {
  const baseClasses = 'px-4 py-2 rounded-lg font-medium transition-all';
  
  const variantClasses = {
    primary: 'bg-blue-600 text-white hover:bg-blue-700',
    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300',
    danger: 'bg-red-600 text-white hover:bg-red-700'
  };

  return (
    <button className={`${baseClasses} ${variantClasses[variant]}`}>
      {children}
    </button>
  );
};
```

### CSS Modules
```typescript
// UserCard.module.css
.card {
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.card:hover {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

// UserCard.tsx
import styles from './UserCard.module.css';

export const UserCard: FC<UserCardProps> = ({ user }) => {
  return (
    <div className={styles.card}>
      {/* ... */}
    </div>
  );
};
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½
```typescript
import { lazy, Suspense } from 'react';

// æ‡’åŠ è½½ç»„ä»¶
const HeavyComponent = lazy(() => import('./HeavyComponent'));

function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <HeavyComponent />
    </Suspense>
  );
}
```

### æ€§èƒ½ä¼˜åŒ–æŠ€å·§
```typescript
// âœ… ä½¿ç”¨ memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
export const ExpensiveComponent = memo(({ data }) => {
  // å¤æ‚æ¸²æŸ“é€»è¾‘
  return <div>{/* ... */}</div>;
});

// âœ… ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
function DataTable({ items }) {
  const sortedItems = useMemo(() => {
    return items.sort((a, b) => a.name.localeCompare(b.name));
  }, [items]);

  return <table>{/* ... */}</table>;
}

// âœ… ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨å¤„ç†é•¿åˆ—è¡¨
import { useVirtualizer } from '@tanstack/react-virtual';

function VirtualList({ items }) {
  const parentRef = useRef<HTMLDivElement>(null);

  const virtualizer = useVirtualizer({
    count: items.length,
    getScrollElement: () => parentRef.current,
    estimateSize: () => 50,
  });

  return (
    <div ref={parentRef} style={{ height: '400px', overflow: 'auto' }}>
      <div style={{ height: virtualizer.getTotalSize() }}>
        {virtualizer.getVirtualItems().map((virtualRow) => (
          <div key={virtualRow.index}>
            {items[virtualRow.index].name}
          </div>
        ))}
      </div>
    </div>
  );
}
```

## ğŸ“‹ å¼€å‘æ£€æŸ¥æ¸…å•

### ä»£ç è´¨é‡
- [ ] TypeScript ç±»å‹å®šä¹‰å®Œæ•´
- [ ] ç»„ä»¶æ‹†åˆ†åˆç†
- [ ] éµå¾ª React Hooks è§„åˆ™
- [ ] æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- [ ] ä»£ç æ ¼å¼ç¬¦åˆ ESLint/Prettier

### ç”¨æˆ·ä½“éªŒ
- [ ] åŠ è½½çŠ¶æ€æç¤º
- [ ] é”™è¯¯çŠ¶æ€å¤„ç†
- [ ] ç©ºçŠ¶æ€å±•ç¤º
- [ ] è¡¨å•éªŒè¯ä¸é”™è¯¯æç¤º
- [ ] å“åº”å¼è®¾è®¡

### æ€§èƒ½
- [ ] é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- [ ] ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½
- [ ] å›¾ç‰‡ä¼˜åŒ–
- [ ] é•¿åˆ—è¡¨è™šæ‹ŸåŒ–
- [ ] é˜²æŠ–ä¸èŠ‚æµ

### å¯è®¿é—®æ€§
- [ ] è¯­ä¹‰åŒ– HTML
- [ ] ARIA å±æ€§
- [ ] é”®ç›˜å¯¼èˆªæ”¯æŒ
- [ ] é¢œè‰²å¯¹æ¯”åº¦
- [ ] å±å¹•é˜…è¯»å™¨æ”¯æŒ

## ğŸ”§ å¸¸ç”¨å·¥å…·
- React 18+
- TypeScript 5+
- Vite
- React Router 6+
- Zustand/Jotaiï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
- TanStack Queryï¼ˆæ•°æ®è·å–ï¼‰
- Tailwind CSS
- Radix UI/Headless UI
- Framer Motionï¼ˆåŠ¨ç”»ï¼‰
