# AI面试系统 - 管理端使用指南

## 系统概述

AI面试系统管理端是一个功能完整的后台管理系统，用于管理整个面试平台的用户、企业、订阅和系统运营数据。

## 主要功能模块

### 1. 仪表板 (Dashboard)
- **实时统计数据**：用户数、企业数、面试完成率等关键指标
- **时间范围选择**：支持7天、30天、90天、1年的数据查看
- **系统状态监控**：API服务、数据库连接、存储状态
- **快速操作入口**：一键跳转到各管理模块

### 2. 用户管理
- **用户列表**：显示所有求职者用户信息
- **状态管理**：激活/禁用用户账号
- **搜索筛选**：按姓名、邮箱、状态等条件筛选
- **活动统计**：查看用户的面试次数、申请职位数等

### 3. 企业管理
- **企业信息**：查看企业基本信息、行业规模
- **认证管理**：审核和管理企业认证状态
- **订阅管理**：查看企业订阅套餐和到期时间
- **人工展期**：为企业订阅进行人工延期操作
- **状态控制**：激活/禁用企业账号

### 4. 管理员管理
- **角色权限**：超级管理员、管理员、协调员三种角色
- **账号管理**：创建、编辑、删除管理员账号
- **权限分配**：为不同管理员分配适当的操作权限
- **状态控制**：激活/禁用管理员账号

### 5. 系统日志
- **操作记录**：记录所有管理员的操作行为
- **安全审计**：登录失败、权限变更等安全事件
- **筛选查询**：按时间、模块、操作结果等条件查询
- **详细信息**：包含IP地址、用户代理、错误信息等

## 技术架构

### 后端技术栈
- **Framework**: Node.js + Express + TypeScript
- **Database**: MySQL + Prisma ORM
- **Authentication**: JWT
- **Validation**: Joi + express-validator
- **Security**: bcryptjs 密码加密

### 前端技术栈
- **Framework**: React + TypeScript
- **Routing**: React Router
- **Styling**: 内联样式 (遵循Apple设计理念)
- **State Management**: React Hooks
- **HTTP Client**: Fetch API

### 设计原则
- **Apple设计理念**：简洁布局、优雅动画、清晰层级、精心设计的间距
- **Material Design**：响应式设计、卡片布局、明确的视觉层级
- **代码质量**：TypeScript类型安全、完善的错误处理、统一的代码风格

## 部署说明

### 后端部署
1. 安装依赖：`cd backend-api && npm install`
2. 配置环境变量：`.env`文件包含数据库连接、JWT密钥等
3. 数据库迁移：`npx prisma db push`
4. 启动服务：`npm run dev` (开发) 或 `npm start` (生产)

### 前端部署
1. 安装依赖：`cd system-admin && npm install`
2. 配置API地址：复制 `.env.example` 为 `.env` 并根据环境调整 `VITE_API_BASE_URL`
3. 构建项目：`npm run build`
4. 启动服务：`npm run dev` (开发) 或部署 `dist` 目录

### 管理员初始化
```sql
-- 创建初始超级管理员账号
INSERT INTO Admin (id, email, password, name, role, isActive) 
VALUES (
  UUID(), 
  'admin@example.com', 
  '$2a$10$hashedPassword', 
  '超级管理员', 
  'SUPER_ADMIN', 
  true
);
```

## 功能使用指南

### 1. 登录系统
- 访问 `/login` 页面
- 输入管理员邮箱和密码
- 登录成功后跳转到Dashboard

### 2. 用户管理操作
- **查看用户列表**：在用户管理页面浏览所有求职者
- **搜索用户**：使用姓名或邮箱进行精确搜索
- **筛选用户**：按活跃状态筛选用户
- **管理状态**：点击"激活/禁用"按钮改变用户状态

### 3. 企业管理操作
- **企业认证**：点击"认证/取消认证"按钮管理企业认证
- **订阅展期**：
  1. 点击"展期"按钮打开展期弹窗
  2. 输入展期天数（1-365天）
  3. 填写展期原因
  4. 确认展期操作
- **状态管理**：激活或禁用企业账号

### 4. 管理员操作
- **创建管理员**：
  1. 点击"添加管理员"按钮
  2. 填写邮箱、密码、姓名
  3. 选择角色级别
  4. 确认创建
- **权限说明**：
  - **超级管理员**：拥有所有权限，不可删除
  - **管理员**：拥有大部分管理权限
  - **协调员**：拥有基础查看和部分操作权限

### 5. 系统日志查询
- **筛选条件**：按模块、操作结果、时间范围筛选
- **搜索功能**：搜索特定的操作描述或目标ID
- **详细信息**：查看操作者、IP地址、错误信息等

## 数据安全

### 权限控制
- JWT令牌认证，24小时有效期
- 基于角色的权限控制(RBAC)
- 敏感操作需要高级权限

### 数据保护
- 密码使用bcrypt加密存储
- 系统操作全程记录日志
- IP地址和用户代理记录用于安全审计

### 安全建议
- 定期更换管理员密码
- 监控系统日志中的异常操作
- 及时处理权限变更请求
- 保护管理员账号信息不外泄

## 常见问题

### Q1: 忘记管理员密码怎么办？
A: 超级管理员可以重置其他管理员密码，或通过数据库直接修改密码hash。

### Q2: 企业展期操作失败怎么处理？
A: 检查企业是否有有效订阅，确认展期天数合理，查看系统日志获取详细错误信息。

### Q3: 系统日志过多影响性能怎么办？
A: 建议定期清理旧日志记录，或实现日志归档功能。

### Q4: 如何添加新的管理功能？
A: 需要同时修改后端API和前端页面，确保权限控制和日志记录正确实现。

## 版本信息

- **当前版本**: v1.0.0
- **最后更新**: 2024年
- **技术支持**: 开发团队
- **文档版本**: v1.0

---

*本系统采用现代化的技术栈和设计理念，确保管理效率和用户体验的完美平衡。* 
